<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Summary</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Sales Summary</h1>
        <h2>Total Sales: <span id="total-sales">0</span></h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Sales</th>
                </tr>
            </thead>
            <tbody id="sales-data">
            </tbody>
        </table>
    </div>

    <script>
        async function fetchSalesData() {
            const response = await fetch('data.csv');
            const data = await response.text();
            return data;
        }

        function parseCSV(data) {
            const lines = data.trim().split('\n');
            const salesArray = lines.map(line => {
                const [item, sales] = line.split(',');
                return { item, sales: parseFloat(sales) };
            });
            return salesArray;
        }

        function calculateTotalSales(salesArray) {
            return salesArray.reduce((total, sale) => total + sale.sales, 0);
        }

        function renderSalesTable(salesArray) {
            const salesDataElement = document.getElementById('sales-data');
            salesDataElement.innerHTML = salesArray.map(sale => `
                <tr>
                    <td>${sale.item}</td>
                    <td>${sale.sales.toFixed(2)}</td>
                </tr>
            `).join('');
        }

        async function main() {
            const csvData = await fetchSalesData();
            const salesArray = parseCSV(csvData);
            const totalSales = calculateTotalSales(salesArray);
            document.getElementById('total-sales').innerText = totalSales.toFixed(2);
            renderSalesTable(salesArray);
        }

        main();
    </script>
</body>
</html>